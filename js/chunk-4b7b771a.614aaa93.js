(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b7b771a"],{2164:function(e,t,a){"use strict";a("2547")},2547:function(e,t,a){},"8e2d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"metadata-penetration"},[t("div",{staticClass:"page-header"},[e._m(0),t("div",{staticClass:"header-right"},[t("el-input",{staticClass:"search-input",attrs:{placeholder:"搜索元数据","prefix-icon":"el-icon-search",clearable:""},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),t("el-button-group",[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddMetadata}},[e._v("新增元数据")]),t("el-button",{attrs:{type:"success",icon:"el-icon-share"},on:{click:e.analyzeRelations}},[e._v("血缘分析")]),t("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:e.refreshData}},[e._v("刷新")])],1)],1)]),t("div",{staticClass:"stat-cards"},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6}},[t("div",{staticClass:"stat-card card-primary"},[t("div",{staticClass:"stat-icon"},[t("i",{staticClass:"el-icon-s-data"})]),t("div",{staticClass:"stat-content"},[t("div",{staticClass:"stat-label"},[e._v("元数据总数")]),t("div",{staticClass:"stat-value"},[e._v("1200")]),t("div",{staticClass:"stat-trend"},[t("span",{staticClass:"trend-up"},[e._v("+15")]),e._v(" 本月")])])])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"stat-card card-success"},[t("div",{staticClass:"stat-icon"},[t("i",{staticClass:"el-icon-s-check"})]),t("div",{staticClass:"stat-content"},[t("div",{staticClass:"stat-label"},[e._v("录入准确率")]),t("div",{staticClass:"stat-value"},[e._v("100%")]),t("div",{staticClass:"stat-trend"},[t("span",{staticClass:"trend-up"},[e._v("+2%")]),e._v(" 同比")])])])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"stat-card card-warning"},[t("div",{staticClass:"stat-icon"},[t("i",{staticClass:"el-icon-time"})]),t("div",{staticClass:"stat-content"},[t("div",{staticClass:"stat-label"},[e._v("平均查询时长")]),t("div",{staticClass:"stat-value"},[e._v("3秒")]),t("div",{staticClass:"stat-trend"},[t("span",{staticClass:"trend-down"},[e._v("-0.5秒")]),e._v(" 优化")])])])]),t("el-col",{attrs:{span:6}},[t("div",{staticClass:"stat-card card-info"},[t("div",{staticClass:"stat-icon"},[t("i",{staticClass:"el-icon-connection"})]),t("div",{staticClass:"stat-content"},[t("div",{staticClass:"stat-label"},[e._v("关联关系数")]),t("div",{staticClass:"stat-value"},[e._v("568")]),t("div",{staticClass:"stat-trend"},[t("span",{staticClass:"trend-up"},[e._v("+22")]),e._v(" 本周")])])])])],1)],1),t("div",{staticClass:"content-section"},[t("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"元数据管理",name:"metadata"}},[t("div",{staticClass:"filter-bar"},[t("el-select",{attrs:{placeholder:"元数据类型",clearable:""},model:{value:e.typeFilter,callback:function(t){e.typeFilter=t},expression:"typeFilter"}},e._l(e.typeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-select",{attrs:{placeholder:"状态",clearable:""},model:{value:e.statusFilter,callback:function(t){e.statusFilter=t},expression:"statusFilter"}},e._l(e.statusOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("el-button",{attrs:{type:"text",icon:"el-icon-refresh"},on:{click:e.resetFilters}},[e._v("重置筛选")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.filteredTableData,border:"",stripe:""}},[t("el-table-column",{attrs:{prop:"name",label:"元数据名称","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.viewMetadataDetail(a.row)}}},[e._v(e._s(a.row.name))])]}}])}),t("el-table-column",{attrs:{prop:"source",label:"数据来源",width:"140"}}),t("el-table-column",{attrs:{prop:"type",label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getTypeTagClass(a.row.type),size:"medium"}},[e._v(e._s(a.row.type))])]}}])}),t("el-table-column",{attrs:{prop:"relation",label:"关联关系",width:"150"}}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:e.getStatusTagClass(a.row.status),size:"medium"}},[e._v(e._s(a.row.status))])]}}])}),t("el-table-column",{attrs:{prop:"updateBy",label:"责任人",width:"120"}}),t("el-table-column",{attrs:{prop:"lastUpdate",label:"最近更新时间",width:"160"}}),t("el-table-column",{attrs:{label:"操作",width:"240",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.editMetadata(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.viewLineage(a.row)}}},[e._v("血缘")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.deleteMetadata(a.row)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"pagination-container"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.filteredTableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),t("el-tab-pane",{attrs:{label:"血缘分析",name:"lineage"}},[t("div",{staticClass:"lineage-toolbar"},[t("el-select",{staticStyle:{width:"220px"},attrs:{placeholder:"选择元数据"},on:{change:e.generateLineage},model:{value:e.selectedMetadata,callback:function(t){e.selectedMetadata=t},expression:"selectedMetadata"}},e._l(e.tableData,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),t("div",{staticClass:"toolbar-actions"},[t("el-radio-group",{attrs:{size:"small"},on:{change:e.generateLineage},model:{value:e.lineageDirection,callback:function(t){e.lineageDirection=t},expression:"lineageDirection"}},[t("el-radio-button",{attrs:{label:"upstream"}},[e._v("上游")]),t("el-radio-button",{attrs:{label:"downstream"}},[e._v("下游")]),t("el-radio-button",{attrs:{label:"both"}},[e._v("全部")])],1),t("el-select",{staticStyle:{width:"120px","margin-left":"10px"},on:{change:e.generateLineage},model:{value:e.lineageDepth,callback:function(t){e.lineageDepth=t},expression:"lineageDepth"}},[t("el-option",{attrs:{label:"1级关系",value:1}}),t("el-option",{attrs:{label:"2级关系",value:2}}),t("el-option",{attrs:{label:"3级关系",value:3}}),t("el-option",{attrs:{label:"全部关系",value:0}})],1)],1)],1),t("div",{staticClass:"lineage-container"},[e.selectedMetadata?t("div",{ref:"lineageChart",staticClass:"lineage-chart"}):t("div",{staticClass:"no-data"},[t("i",{staticClass:"el-icon-connection"}),t("p",[e._v("请选择元数据以查看血缘关系")])])]),e.selectedMetadata?t("div",{staticClass:"lineage-info"},[t("el-card",{staticClass:"info-card"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("血缘分析信息")])]),t("div",{staticClass:"info-content"},[t("div",{staticClass:"info-item"},[t("span",{staticClass:"item-label"},[e._v("选中元数据：")]),t("span",{staticClass:"item-value"},[e._v(e._s(e.getMetadataName(e.selectedMetadata)))])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"item-label"},[e._v("上游节点数：")]),t("span",{staticClass:"item-value"},[e._v("3")])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"item-label"},[e._v("下游节点数：")]),t("span",{staticClass:"item-value"},[e._v("2")])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"item-label"},[e._v("关系路径数：")]),t("span",{staticClass:"item-value"},[e._v("5")])]),t("div",{staticClass:"info-item"},[t("span",{staticClass:"item-label"},[e._v("最大路径长度：")]),t("span",{staticClass:"item-value"},[e._v("3")])])])])],1):e._e()])],1)],1),t("el-dialog",{attrs:{visible:e.detailVisible,width:"70%",title:e.currentMetadata.name+" - 元数据详情",center:""},on:{"update:visible":function(t){e.detailVisible=t}}},[t("el-descriptions",{attrs:{column:2,border:""}},[t("el-descriptions-item",{attrs:{label:"元数据名称"}},[e._v(e._s(e.currentMetadata.name))]),t("el-descriptions-item",{attrs:{label:"数据来源"}},[e._v(e._s(e.currentMetadata.source))]),t("el-descriptions-item",{attrs:{label:"元数据类型"}},[e._v(e._s(e.currentMetadata.type))]),t("el-descriptions-item",{attrs:{label:"数据大小"}},[e._v(e._s(e.currentMetadata.dataSize))]),t("el-descriptions-item",{attrs:{label:"关联关系"}},[e._v(e._s(e.currentMetadata.relation))]),t("el-descriptions-item",{attrs:{label:"更新频率"}},[e._v(e._s(e.currentMetadata.frequency))]),t("el-descriptions-item",{attrs:{label:"状态"}},[e._v(e._s(e.currentMetadata.status))]),t("el-descriptions-item",{attrs:{label:"责任人"}},[e._v(e._s(e.currentMetadata.updateBy))]),t("el-descriptions-item",{attrs:{label:"最近更新时间"}},[e._v(e._s(e.currentMetadata.lastUpdate))]),t("el-descriptions-item",{attrs:{label:"描述信息",span:2}},[e._v(e._s(e.currentMetadata.description))])],1),t("el-tabs",{staticStyle:{"margin-top":"20px"}},[t("el-tab-pane",{attrs:{label:"字段信息"}},[t("el-table",{attrs:{data:e.currentFields,border:""}},[t("el-table-column",{attrs:{prop:"name",label:"字段名称"}}),t("el-table-column",{attrs:{prop:"type",label:"数据类型",width:"120"}}),t("el-table-column",{attrs:{prop:"isPrimary",label:"主键",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isPrimary?t("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("是")]):t("span",[e._v("-")])]}}])}),t("el-table-column",{attrs:{prop:"isNull",label:"允许空",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isNull?t("el-tag",{attrs:{type:"info",size:"mini"}},[e._v("是")]):t("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v("否")])]}}])}),t("el-table-column",{attrs:{prop:"comment",label:"字段说明"}})],1)],1),t("el-tab-pane",{attrs:{label:"血缘关系"}},[t("div",{ref:"detailLineageChart",staticStyle:{height:"300px"}})]),t("el-tab-pane",{attrs:{label:"质量检测"}},[t("el-table",{attrs:{data:e.qualityRecords,border:""}},[t("el-table-column",{attrs:{prop:"date",label:"检测日期",width:"120"}}),t("el-table-column",{attrs:{prop:"completeness",label:"完整性",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-progress",{attrs:{percentage:a.row.completeness,color:e.getQualityColor(a.row.completeness)}})]}}])}),t("el-table-column",{attrs:{prop:"accuracy",label:"准确性",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-progress",{attrs:{percentage:a.row.accuracy,color:e.getQualityColor(a.row.accuracy)}})]}}])}),t("el-table-column",{attrs:{prop:"consistency",label:"一致性",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-progress",{attrs:{percentage:a.row.consistency,color:e.getQualityColor(a.row.consistency)}})]}}])}),t("el-table-column",{attrs:{prop:"issues",label:"问题数",width:"100"}}),t("el-table-column",{attrs:{prop:"status",label:"处理状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"已处理"===a.row.status?"success":"warning",size:"mini"}},[e._v(e._s(a.row.status))])]}}])})],1)],1)],1)],1),t("el-dialog",{attrs:{visible:e.editVisible,width:"600px",title:e.isNewMetadata?"新增元数据":"编辑元数据",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[t("el-form",{attrs:{model:e.editForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"元数据名称"}},[t("el-input",{attrs:{placeholder:"请输入元数据名称"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),t("el-form-item",{attrs:{label:"数据来源"}},[t("el-input",{attrs:{placeholder:"请输入数据来源"},model:{value:e.editForm.source,callback:function(t){e.$set(e.editForm,"source",t)},expression:"editForm.source"}})],1),t("el-form-item",{attrs:{label:"元数据类型"}},[t("el-select",{attrs:{placeholder:"请选择元数据类型"},model:{value:e.editForm.type,callback:function(t){e.$set(e.editForm,"type",t)},expression:"editForm.type"}},e._l(e.typeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"关联关系"}},[t("el-input",{attrs:{placeholder:"请输入关联关系"},model:{value:e.editForm.relation,callback:function(t){e.$set(e.editForm,"relation",t)},expression:"editForm.relation"}})],1),t("el-form-item",{attrs:{label:"数据大小"}},[t("el-input",{attrs:{placeholder:"请输入数据大小"},model:{value:e.editForm.dataSize,callback:function(t){e.$set(e.editForm,"dataSize",t)},expression:"editForm.dataSize"}})],1),t("el-form-item",{attrs:{label:"更新频率"}},[t("el-select",{attrs:{placeholder:"请选择更新频率"},model:{value:e.editForm.frequency,callback:function(t){e.$set(e.editForm,"frequency",t)},expression:"editForm.frequency"}},[t("el-option",{attrs:{label:"实时更新",value:"实时更新"}}),t("el-option",{attrs:{label:"小时更新",value:"小时更新"}}),t("el-option",{attrs:{label:"日更新",value:"日更新"}}),t("el-option",{attrs:{label:"周更新",value:"周更新"}}),t("el-option",{attrs:{label:"月更新",value:"月更新"}})],1)],1),t("el-form-item",{attrs:{label:"状态"}},[t("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.statusOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"责任人"}},[t("el-input",{attrs:{placeholder:"请输入责任人"},model:{value:e.editForm.updateBy,callback:function(t){e.$set(e.editForm,"updateBy",t)},expression:"editForm.updateBy"}})],1),t("el-form-item",{attrs:{label:"描述信息"}},[t("el-input",{attrs:{type:"textarea",rows:"4",placeholder:"请输入描述信息"},model:{value:e.editForm.description,callback:function(t){e.$set(e.editForm,"description",t)},expression:"editForm.description"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.saveMetadata}},[e._v("保存")])],1)],1)],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"header-left"},[t("h2",{staticClass:"page-title"},[e._v("元数据穿透治理")]),t("div",{staticClass:"page-desc"},[e._v("管理元数据，包括数据定义、来源、关系等，方便数据的理解和使用。")])])}],l=a("313e"),r={name:"MetadataPenetration",data(){return{searchQuery:"",typeFilter:"",statusFilter:"",activeTab:"metadata",currentPage:1,pageSize:10,typeOptions:[{value:"主题数据",label:"主题数据"},{value:"业务数据",label:"业务数据"},{value:"基础数据",label:"基础数据"},{value:"外部数据",label:"外部数据"},{value:"衍生数据",label:"衍生数据"}],statusOptions:[{value:"已确认",label:"已确认"},{value:"待确认",label:"待确认"},{value:"审核中",label:"审核中"},{value:"已废弃",label:"已废弃"}],selectedMetadata:null,lineageDirection:"both",lineageDepth:2,detailVisible:!1,currentMetadata:{},currentFields:[],qualityRecords:[],editVisible:!1,isNewMetadata:!1,editForm:{name:"",source:"",type:"",relation:"",dataSize:"",frequency:"",status:"",updateBy:"",description:""},tableData:[{id:1,name:"人口表",source:"公安局数据中心",type:"主题数据",relation:"关联企业表",lastUpdate:"2025-05-30",updateBy:"张明轩",status:"已确认",description:"包含全市人口基本信息、人口变动信息等",dataSize:"1.2TB",frequency:"日更新"},{id:2,name:"企业表",source:"市场监管局",type:"主题数据",relation:"关联人口表",lastUpdate:"2025-05-30",updateBy:"刘伟峰",status:"已确认",description:"包含企业基本信息、经营信息、资质信息等",dataSize:"860GB",frequency:"日更新"},{id:3,name:"环境监测表",source:"环保局",type:"业务数据",relation:"关联企业表",lastUpdate:"2025-05-30",updateBy:"陈晓静",status:"已确认",description:"包含空气质量、水质、噪音等环境监测数据",dataSize:"520GB",frequency:"小时更新"},{id:4,name:"交通流量表",source:"交通局",type:"业务数据",relation:"关联地理信息表",lastUpdate:"2025-05-29",updateBy:"杨宏达",status:"待确认",description:"包含道路交通流量、拥堵指数等实时交通数据",dataSize:"750GB",frequency:"实时更新"},{id:5,name:"医疗服务表",source:"卫健委",type:"业务数据",relation:"关联人口表",lastUpdate:"2025-05-28",updateBy:"林婉如",status:"审核中",description:"包含医疗机构、医疗服务、医保数据等信息",dataSize:"980GB",frequency:"日更新"}]}},computed:{filteredTableData(){return this.searchQuery||this.typeFilter||this.statusFilter?this.tableData.filter(e=>{const t=!this.searchQuery||e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.source&&e.source.toLowerCase().includes(this.searchQuery.toLowerCase())||e.relation&&e.relation.toLowerCase().includes(this.searchQuery.toLowerCase()),a=!this.typeFilter||e.type===this.typeFilter,s=!this.statusFilter||e.status===this.statusFilter;return t&&a&&s}):this.tableData}},mounted(){"lineage"===this.activeTab&&this.selectedMetadata&&this.$nextTick(()=>{this.generateLineage()})},methods:{showAddMetadata(){this.isNewMetadata=!0,this.editForm={name:"",source:"",type:"业务数据",relation:"",dataSize:"",frequency:"日更新",status:"待确认",updateBy:"",description:""},this.editVisible=!0},analyzeRelations(){this.activeTab="lineage",this.$message.success("正在分析元数据血缘关系"),this.$nextTick(()=>{this.selectedMetadata&&this.generateLineage()})},refreshData(){this.$message.success("数据已刷新")},resetFilters(){this.searchQuery="",this.typeFilter="",this.statusFilter=""},handleSizeChange(e){this.pageSize=e},handleCurrentChange(e){this.currentPage=e},getTypeTagClass(e){const t={"主题数据":"primary","业务数据":"success","基础数据":"info","外部数据":"warning","衍生数据":"danger"};return t[e]||"info"},getStatusTagClass(e){const t={"已确认":"success","待确认":"warning","审核中":"info","已废弃":"danger"};return t[e]||"info"},getQualityColor(e){return e>=90?"#67C23A":e>=75?"#E6A23C":"#F56C6C"},viewMetadataDetail(e){this.currentMetadata=e,this.currentFields=[{name:"id",type:"varchar(32)",isPrimary:!0,isNull:!1,comment:"唯一标识"},{name:"name",type:"varchar(100)",isPrimary:!1,isNull:!1,comment:"名称"},{name:"age",type:"int",isPrimary:!1,isNull:!0,comment:"年龄"},{name:"gender",type:"tinyint",isPrimary:!1,isNull:!0,comment:"性别"},{name:"address",type:"varchar(200)",isPrimary:!1,isNull:!0,comment:"地址"},{name:"phone",type:"varchar(20)",isPrimary:!1,isNull:!0,comment:"电话"},{name:"createTime",type:"datetime",isPrimary:!1,isNull:!1,comment:"创建时间"},{name:"updateTime",type:"datetime",isPrimary:!1,isNull:!1,comment:"更新时间"}],this.qualityRecords=[{date:"2025-06-01",completeness:98,accuracy:95,consistency:97,issues:12,status:"已处理"},{date:"2025-05-25",completeness:96,accuracy:94,consistency:95,issues:18,status:"已处理"},{date:"2025-05-18",completeness:95,accuracy:92,consistency:93,issues:22,status:"已处理"},{date:"2025-05-11",completeness:93,accuracy:91,consistency:92,issues:28,status:"已处理"}],this.detailVisible=!0,this.$nextTick(()=>{this.initDetailLineageChart()})},editMetadata(e){this.isNewMetadata=!1,this.editForm={id:e.id,name:e.name,source:e.source,type:e.type,relation:e.relation,dataSize:e.dataSize,frequency:e.frequency,status:e.status,updateBy:e.updateBy,description:e.description},this.editVisible=!0},deleteMetadata(e){this.$confirm("确定要删除此元数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.tableData=this.tableData.filter(t=>t.id!==e.id),this.$message.success("元数据已删除")}).catch(()=>{})},saveMetadata(){if(!this.editForm.name||!this.editForm.source)return void this.$message.warning("请填写完整的元数据信息");const e={id:this.editForm.id||Date.now(),name:this.editForm.name,source:this.editForm.source,type:this.editForm.type,relation:this.editForm.relation,dataSize:this.editForm.dataSize,frequency:this.editForm.frequency,status:this.editForm.status,updateBy:this.editForm.updateBy,lastUpdate:(new Date).toISOString().split("T")[0],description:this.editForm.description};if(this.isNewMetadata)this.tableData.unshift(e),this.$message.success("元数据已添加");else{const t=this.tableData.findIndex(t=>t.id===e.id);-1!==t&&this.tableData.splice(t,1,e),this.$message.success("元数据已更新")}this.editVisible=!1},viewLineage(e){this.selectedMetadata=e.id,this.activeTab="lineage",this.$nextTick(()=>{this.generateLineage()})},getMetadataName(e){const t=this.tableData.find(t=>t.id===e);return t?t.name:""},generateLineage(){this.selectedMetadata&&this.$nextTick(()=>{const e=l["init"](this.$refs.lineageChart),t=[{id:"node0",name:this.getMetadataName(this.selectedMetadata),category:0,symbolSize:50},{id:"node1",name:"人口表",category:1,symbolSize:40},{id:"node2",name:"企业表",category:1,symbolSize:40},{id:"node3",name:"地址表",category:1,symbolSize:35},{id:"node4",name:"资质表",category:2,symbolSize:35},{id:"node5",name:"交易表",category:2,symbolSize:35},{id:"node6",name:"员工表",category:2,symbolSize:30}],a=[{source:"node0",target:"node1",value:"包含"},{source:"node0",target:"node2",value:"关联"},{source:"node1",target:"node3",value:"包含"},{source:"node2",target:"node4",value:"包含"},{source:"node2",target:"node5",value:"关联"},{source:"node4",target:"node6",value:"关联"}],s=[{name:"当前元数据"},{name:"上游元数据"},{name:"下游元数据"}],i={tooltip:{trigger:"item",formatter:function(e){return"edge"===e.dataType?e.data.value:e.data.name}},legend:[{data:s.map((function(e){return e.name}))}],series:[{type:"graph",layout:"force",data:t,links:a,categories:s,roam:!0,label:{show:!0,position:"right"},force:{repulsion:100,edgeLength:[80,120]},edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,8],edgeLabel:{show:!0,formatter:function(e){return e.data.value},fontSize:12},lineStyle:{opacity:.9,width:2,curveness:0}}]};e.setOption(i),window.addEventListener("resize",(function(){e.resize()}))})},initDetailLineageChart(){this.$nextTick(()=>{if(!this.$refs.detailLineageChart)return;const e=l["init"](this.$refs.detailLineageChart),t={tooltip:{},series:[{type:"graph",layout:"force",data:[{id:"detail0",name:this.currentMetadata.name,symbolSize:50,category:0},{id:"detail1",name:"上游数据1",symbolSize:30,category:1},{id:"detail2",name:"上游数据2",symbolSize:30,category:1},{id:"detail3",name:"下游数据1",symbolSize:30,category:2},{id:"detail4",name:"下游数据2",symbolSize:30,category:2}],links:[{source:"detail1",target:"detail0"},{source:"detail2",target:"detail0"},{source:"detail0",target:"detail3"},{source:"detail0",target:"detail4"}],categories:[{name:"当前"},{name:"上游"},{name:"下游"}],roam:!0,label:{show:!0},force:{repulsion:80}}]};e.setOption(t)})}},watch:{activeTab(e){"lineage"===e&&this.selectedMetadata&&this.$nextTick(()=>{this.generateLineage()})}}},n=r,o=(a("2164"),a("2877")),c=Object(o["a"])(n,s,i,!1,null,"da823978",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-4b7b771a.614aaa93.js.map