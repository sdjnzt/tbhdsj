(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-374a63ba"],{1495:function(t,e,a){"use strict";a("81bc")},"81bc":function(t,e,a){},9406:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-container"},[e("el-alert",{staticClass:"dashboard-announcement",staticStyle:{"margin-bottom":"20px"},attrs:{title:"【平台公告】太白湖新区大数据平台将于本周六凌晨进行系统维护，届时部分功能可能受影响，请提前做好准备。",type:"info","show-icon":"",closable:!1}}),e("el-card",{staticClass:"intro-card",attrs:{"body-style":{padding:"20px"}}},[e("div",{staticClass:"intro-header"},[e("h2",[t._v("太白湖一体化大数据平台")]),e("div",{staticClass:"intro-stats"},[e("div",{staticClass:"stat-item"},[e("span",{staticClass:"label"},[t._v("数据总量")]),e("span",{staticClass:"value"},[t._v("1.2TB")])]),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"label"},[t._v("接入系统")]),e("span",{staticClass:"value"},[t._v("10个")])]),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"label"},[t._v("覆盖部门")]),e("span",{staticClass:"value"},[t._v("15个")])])])])]),e("div",{staticClass:"refresh-bar"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",size:"small",loading:t.loading},on:{click:t.refreshData}},[t._v(" 刷新数据 ")]),e("span",{staticClass:"last-update"},[t._v("最后更新："+t._s(t.lastUpdateTime))])],1),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},t._l(t.coreMetrics,(function(a,s){return e("el-col",{key:s,attrs:{span:6}},[e("el-card",{staticClass:"dashboard-card",attrs:{shadow:"hover","body-style":{padding:"20px"}},nativeOn:{click:function(e){return t.handleMetricClick(a)}}},[e("div",{staticClass:"card-header"},[e("i",{class:a.icon}),e("span",[t._v(t._s(a.title))])]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"card-value"},[t._v(t._s(a.value))]),e("div",{staticClass:"card-footer"},[e("span",[t._v(t._s(a.compare))]),e("span",{class:a.trend>0?"up":a.trend<0?"down":""},[t._v(" "+t._s(a.trend>0?"+":"")+t._s(a.trend)+t._s(a.unit)+" ")])])])])],1)})),1),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},t._l(t.businessMetrics,(function(a,s){return e("el-col",{key:s,attrs:{span:6}},[e("el-card",{staticClass:"dashboard-card",attrs:{shadow:"hover","body-style":{padding:"20px"}},nativeOn:{click:function(e){return t.handleMetricClick(a)}}},[e("div",{staticClass:"card-header"},[e("i",{class:a.icon}),e("span",[t._v(t._s(a.title))])]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"card-value"},[t._v(t._s(a.value))]),e("div",{staticClass:"card-footer"},[e("span",[t._v(t._s(a.label))])])])])],1)})),1),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:16}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("系统运行趋势")]),e("div",{staticClass:"header-right"},[e("el-select",{staticStyle:{width:"120px","margin-right":"10px"},attrs:{size:"small"},on:{change:t.updateTrendChart},model:{value:t.trendBizType,callback:function(e){t.trendBizType=e},expression:"trendBizType"}},[e("el-option",{attrs:{label:"系统运行",value:"system"}}),e("el-option",{attrs:{label:"API调用",value:"api"}}),e("el-option",{attrs:{label:"数据接入",value:"access"}})],1),e("el-radio-group",{attrs:{size:"small"},on:{change:t.updateTrendChart},model:{value:t.trendTimeRange,callback:function(e){t.trendTimeRange=e},expression:"trendTimeRange"}},[e("el-radio-button",{attrs:{label:"day"}},[t._v("日")]),e("el-radio-button",{attrs:{label:"week"}},[t._v("周")]),e("el-radio-button",{attrs:{label:"month"}},[t._v("月")])],1),e("el-tooltip",{attrs:{content:"点击图表可查看详细数据",placement:"top"}},[e("i",{staticClass:"el-icon-info"})])],1)]),e("div",{ref:"trendChart",staticStyle:{height:"350px"},on:{click:t.showTrendDetail}})])],1),e("el-col",{attrs:{span:8}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("告警分布")]),e("el-radio-group",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{change:t.updateAlarmChart},model:{value:t.alarmTimeRange,callback:function(e){t.alarmTimeRange=e},expression:"alarmTimeRange"}},[e("el-radio-button",{attrs:{label:"today"}},[t._v("今日")]),e("el-radio-button",{attrs:{label:"week"}},[t._v("本周")]),e("el-radio-button",{attrs:{label:"month"}},[t._v("本月")])],1),e("el-tooltip",{attrs:{content:"鼠标悬停可查看详细数据",placement:"top"}},[e("i",{staticClass:"el-icon-info"})])],1),e("div",{ref:"alarmChart",staticStyle:{height:"350px"}})])],1)],1),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-card",{staticClass:"realtime-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("实时动态")]),e("el-button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:t.refreshRealtime}},[t._v("手动刷新")])],1),e("el-timeline",{staticStyle:{"max-height":"220px","overflow-y":"auto"}},t._l(t.realtimeList,(function(a,s){return e("el-timeline-item",{key:s,attrs:{timestamp:a.time,color:a.color}},[e("span",[t._v(t._s(a.content))])])})),1)],1)],1)],1),e("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("最近告警")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"#409EFF"},attrs:{type:"text"},on:{click:t.viewAllAlarms}},[t._v("查看全部")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"10px"},attrs:{type:"text"},on:{click:t.refreshAlarms}},[t._v("刷新")])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.recentAlarms,"max-height":300,"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)","row-class-name":"dashboard-table-row"}},[e("el-table-column",{attrs:{prop:"time",label:"时间",width:"160"}}),e("el-table-column",{attrs:{prop:"type",label:"类型",width:"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:t.getAlarmType(a.row.type),effect:"plain"}},[t._v(t._s(a.row.type))])]}}])}),e("el-table-column",{attrs:{prop:"content",label:"内容"}}),e("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:t.getStatusType(a.row.status),effect:"plain"}},[t._v(t._s(a.row.status))])]}}])})],1)],1)],1),e("el-col",{attrs:{span:12}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("待处理任务")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"#409EFF"},attrs:{type:"text"},on:{click:t.viewAllTasks}},[t._v("查看全部")]),e("el-button",{staticStyle:{float:"right",padding:"3px 0","margin-right":"10px"},attrs:{type:"text"},on:{click:t.refreshTasks}},[t._v("刷新")])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.pendingTasks,"max-height":300,"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)","row-class-name":"dashboard-table-row"}},[e("el-table-column",{attrs:{prop:"name",label:"任务名称",width:"160"}}),e("el-table-column",{attrs:{prop:"type",label:"类型",width:"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:t.getTaskType(a.row.type),effect:"plain"}},[t._v(t._s(a.row.type))])]}}])}),e("el-table-column",{attrs:{prop:"deadline",label:"截止时间",width:"160"}}),e("el-table-column",{attrs:{prop:"priority",label:"优先级",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:t.getPriorityType(a.row.priority),effect:"plain"}},[t._v(t._s(a.row.priority))])]}}])})],1)],1)],1)],1),e("el-dialog",{attrs:{title:"系统运行趋势详情",visible:t.trendDetailVisible,width:"80%","before-close":t.handleTrendDetailClose},on:{"update:visible":function(e){t.trendDetailVisible=e}}},[e("div",{ref:"trendDetailChart",staticStyle:{height:"400px"}}),e("div",{staticClass:"trend-detail-stats"},t._l(t.trendDetailStats,(function(a,s){return e("div",{key:s,staticClass:"stat-item"},[e("span",{staticClass:"label"},[t._v(t._s(a.label))]),e("span",{staticClass:"value"},[t._v(t._s(a.value))])])})),0)])],1)},l=[],i={name:"Dashboard",data(){const t=new Date,e=["系统告警","业务告警","安全告警","性能告警","其他告警"],a=["数据库连接异常","API响应超时","磁盘空间不足","数据标准不一致","异常登录尝试","数据同步延迟","CPU使用率过高","内存泄漏预警"],s=["未处理","处理中","已处理"],l=Array.from({length:6}).map((l,i)=>{const r=new Date(t.getTime()-15*i*6e4),n=r.toISOString().slice(0,10),o=r.toTimeString().substr(0,8);return{time:`${n} ${o}`,type:e[Math.floor(Math.random()*e.length)],content:a[Math.floor(Math.random()*a.length)],status:s[Math.floor(Math.random()*s.length)]}}),i=["日常任务","维护任务","安全任务","融合任务","标准任务","录入任务"],r=["数据质量检查","系统维护","安全审计","数据融合处理","标准文档更新","元数据录入","API接口测试","数据修正"],n=["高","中","低"],o=Array.from({length:6}).map((e,a)=>{const s=new Date(t.getTime()+12*(a+1)*3600*1e3),l=s.toISOString().slice(0,10),o=s.toTimeString().substr(0,8);return{name:r[Math.floor(Math.random()*r.length)],type:i[Math.floor(Math.random()*i.length)],deadline:`${l} ${o}`,priority:n[Math.floor(Math.random()*n.length)]}});return{loading:!1,lastUpdateTime:(new Date).toLocaleString(),timer:null,trendTimeRange:"day",trendDetailVisible:!1,trendBizType:"system",alarmTimeRange:"today",announcement:"【平台公告】太白湖新区大数据平台将于本周六凌晨进行系统维护，届时部分功能可能受影响，请提前做好准备。",realtimeList:[{time:"10:30:12",content:'新接入数据源"人口库"',color:"#409EFF"},{time:"10:29:50",content:'API调用"getUserInfo"成功',color:"#67C23A"},{time:"10:29:20",content:"数据修正任务完成，修正率99.2%",color:"#E6A23C"},{time:"10:28:55",content:'应急事件"道路积水"已处理',color:"#F56C6C"},{time:"10:28:30",content:'新接入数据源"企业库"',color:"#409EFF"}],realtimeTimer:null,coreMetrics:[{title:"告警总数",value:"12",icon:"el-icon-warning",compare:"较昨日",trend:2,unit:""},{title:"应急事件",value:"3",icon:"el-icon-s-opportunity",compare:"较昨日",trend:-1,unit:""},{title:"数据质量",value:"98.5%",icon:"el-icon-s-data",compare:"较昨日",trend:.5,unit:"%"},{title:"设施状态",value:"96.8%",icon:"el-icon-s-platform",compare:"较昨日",trend:1.2,unit:"%"}],businessMetrics:[{title:"一网通办",value:"98.2%",icon:"el-icon-s-claim",label:"办结率"},{title:"一网统管",value:"95.5%",icon:"el-icon-s-management",label:"覆盖率"},{title:"数据标准",value:"98%",icon:"el-icon-s-marketing",label:"符合率"},{title:"数据融合",value:"95%",icon:"el-icon-s-cooperation",label:"成功率"}],recentAlarms:l,pendingTasks:o,trendDetailStats:[{label:"平均CPU使用率",value:"65%"},{label:"平均内存使用率",value:"70%"},{label:"平均磁盘使用率",value:"78%"},{label:"峰值时间",value:"12:00"}],trendChartData:{system:{day:{legend:["CPU使用率","内存使用率","磁盘使用率"],x:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"],y:[[45,52,48,65,75,70,60,55],[60,65,58,70,80,75,65,60],[75,78,76,80,82,80,78,75]]},week:{legend:["CPU使用率","内存使用率","磁盘使用率"],x:["周一","周二","周三","周四","周五","周六","周日"],y:[[55,60,62,65,70,68,66],[65,68,70,72,75,73,70],[78,80,81,82,83,82,80]]},month:{legend:["CPU使用率","内存使用率","磁盘使用率"],x:["1日","5日","10日","15日","20日","25日","30日"],y:[[50,55,60,65,70,68,66],[60,65,70,75,80,78,75],[75,78,80,82,85,83,80]]}},api:{day:{legend:["API调用量","成功率"],x:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"],y:[[120,150,180,200,220,210,190,170],[98,97,99,98,99,97,98,99]]},week:{legend:["API调用量","成功率"],x:["周一","周二","周三","周四","周五","周六","周日"],y:[[800,900,950,1e3,1100,1050,980],[98,98,99,97,98,97,98]]},month:{legend:["API调用量","成功率"],x:["1日","5日","10日","15日","20日","25日","30日"],y:[[3e3,3500,4e3,4200,4500,4300,4100],[98,98,99,98,99,97,98]]}},access:{day:{legend:["数据接入量"],x:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"],y:[[20,25,30,35,40,38,36,32]]},week:{legend:["数据接入量"],x:["周一","周二","周三","周四","周五","周六","周日"],y:[[120,130,140,150,160,155,148]]},month:{legend:["数据接入量"],x:["1日","5日","10日","15日","20日","25日","30日"],y:[[500,600,700,800,900,850,820]]}}},alarmChartData:{today:[{value:10,name:"系统告警"},{value:8,name:"业务告警"},{value:6,name:"安全告警"},{value:4,name:"性能告警"},{value:2,name:"其他告警"}],week:[{value:35,name:"系统告警"},{value:25,name:"业务告警"},{value:20,name:"安全告警"},{value:15,name:"性能告警"},{value:5,name:"其他告警"}],month:[{value:120,name:"系统告警"},{value:90,name:"业务告警"},{value:60,name:"安全告警"},{value:40,name:"性能告警"},{value:20,name:"其他告警"}]}}},mounted(){this.initCharts(),this.timer=setInterval(()=>{this.lastUpdateTime=(new Date).toLocaleString()},1e3),this.realtimeTimer=setInterval(this.pushRealtime,4e3)},beforeDestroy(){this.timer&&clearInterval(this.timer),this.realtimeTimer&&clearInterval(this.realtimeTimer)},methods:{refreshData(){this.loading=!0,setTimeout(()=>{this.loading=!1,this.lastUpdateTime=(new Date).toLocaleString(),this.$message.success("数据刷新成功"),this.updateTrendChart(),this.updateAlarmChart()},1e3)},initCharts(){this.updateTrendChart(),this.updateAlarmChart(),window.addEventListener("resize",()=>{this.$echarts.init(this.$refs.trendChart).resize(),this.$echarts.init(this.$refs.alarmChart).resize()})},updateTrendChart(){const t=this.$echarts.init(this.$refs.trendChart),{legend:e,x:a,y:s}=this.trendChartData[this.trendBizType][this.trendTimeRange],l=e.map((t,e)=>({name:t,type:"line",smooth:!0,data:s[e],areaStyle:{opacity:.1},emphasis:{focus:"series"}}));let i="";"system"===this.trendBizType?i="系统运行趋势":"api"===this.trendBizType?i="API调用趋势":"access"===this.trendBizType&&(i="数据接入趋势"),t.setOption({title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:e},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:a},yAxis:{type:"value",axisLabel:{formatter:"{value}"}},series:l})},updateAlarmChart(){const t=this.$echarts.init(this.$refs.alarmChart);t.setOption({title:{text:"告警分布",left:"center",top:10,textStyle:{fontSize:16}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"horizontal",left:"center",top:"bottom",data:["系统告警","业务告警","安全告警","性能告警","其他告警"]},series:[{name:"告警类型",type:"pie",radius:["50%","70%"],center:["50%","50%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"20",fontWeight:"bold"}},labelLine:{show:!1},data:this.alarmChartData[this.alarmTimeRange]}]})},showTrendDetail(){this.trendDetailVisible=!0,this.$nextTick(()=>{const t=this.$echarts.init(this.$refs.trendDetailChart);t.setOption({})})},handleTrendDetailClose(t){this.$confirm("确认关闭？").then(e=>{t()}).catch(t=>{})},viewAllAlarms(){this.$message.info("查看全部告警")},viewAllTasks(){this.$message.info("查看全部任务")},getAlarmType(t){const e={"系统告警":"danger","业务告警":"warning","安全告警":"info"};return e[t]||"info"},getStatusType(t){const e={"未处理":"danger","处理中":"warning","已处理":"success"};return e[t]||"info"},getTaskType(t){const e={"日常任务":"primary","维护任务":"success","安全任务":"warning"};return e[t]||"info"},getPriorityType(t){const e={"高":"danger","中":"warning","低":"info"};return e[t]||"info"},handleMetricClick(t){this.$message({message:`跳转到"${t.title||t.label}"业务模块（模拟）`,type:"info"})},pushRealtime(){const t=new Date,e=t.toTimeString().substr(0,8),a=[{content:'新接入数据源"人口库"',color:"#409EFF"},{content:'API调用"getUserInfo"成功',color:"#67C23A"},{content:"数据修正任务完成，修正率99.2%",color:"#E6A23C"},{content:'应急事件"道路积水"已处理',color:"#F56C6C"},{content:'新接入数据源"企业库"',color:"#409EFF"},{content:'API调用"updateData"失败',color:"#F56C6C"},{content:"数据标准文档已更新",color:"#909399"},{content:"元数据录入完成",color:"#67C23A"}],s=Math.floor(Math.random()*a.length);this.realtimeList.unshift({time:e,...a[s]}),this.realtimeList.length>10&&this.realtimeList.pop()},refreshRealtime(){this.pushRealtime(),this.$message.success("实时动态已刷新")},refreshAlarms(){const t=["系统告警","业务告警","安全告警","性能告警","其他告警"],e=["数据库连接异常","API响应超时","磁盘空间不足","数据标准不一致","异常登录尝试","数据同步延迟","CPU使用率过高","内存泄漏预警"],a=["未处理","处理中","已处理"],s=new Date;this.recentAlarms=Array.from({length:6}).map((l,i)=>{const r=new Date(s.getTime()-15*i*6e4),n=r.toISOString().slice(0,10),o=r.toTimeString().substr(0,8);return{time:`${n} ${o}`,type:t[Math.floor(Math.random()*t.length)],content:e[Math.floor(Math.random()*e.length)],status:a[Math.floor(Math.random()*a.length)]}}),this.$message.success("告警数据已刷新")},refreshTasks(){const t=["日常任务","维护任务","安全任务","融合任务","标准任务","录入任务"],e=["数据质量检查","系统维护","安全审计","数据融合处理","标准文档更新","元数据录入","API接口测试","数据修正"],a=["高","中","低"],s=new Date;this.pendingTasks=Array.from({length:6}).map((l,i)=>{const r=new Date(s.getTime()+12*(i+1)*3600*1e3),n=r.toISOString().slice(0,10),o=r.toTimeString().substr(0,8);return{name:e[Math.floor(Math.random()*e.length)],type:t[Math.floor(Math.random()*t.length)],deadline:`${n} ${o}`,priority:a[Math.floor(Math.random()*a.length)]}}),this.$message.success("任务数据已刷新")}}},r=i,n=(a("1495"),a("2877")),o=Object(n["a"])(r,s,l,!1,null,"6bbbc6b0",null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-374a63ba.2093fbf0.js.map